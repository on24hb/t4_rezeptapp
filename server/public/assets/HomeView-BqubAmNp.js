import{d as R,u as w,r as T,i as b,j as z,c as a,a as n,t as l,f as i,h as g,k as _,l as V,e as A,b as m,m as N,F as c,n as u,o as s,p as f,q as h,s as S,w as x,_ as B}from"./index-CQ66hlSz.js";import{u as D,a as I,g as H}from"./tags-hyUKznts.js";import{R as L}from"./RecipeTags-BEyMkFtt.js";const M={class:"view-header"},$={class:"filter-bar"},j=["value"],q={class:"active-filters"},E=["onClick"],K={class:"recipe-list-container"},U={key:0},W={key:1,style:{color:"red"}},G={key:2,class:"recipe-grid"},J={class:"recipe-card"},O={class:"recipe-header"},P=["onClick","aria-pressed","title"],Q={key:0},X={key:1},Y={key:3},Z={key:4},ee=R({__name:"HomeView",setup(te){const k=w(),t=D(),r=T(""),p=b(()=>I.filter(d=>!t.activeTagFilters.includes(d.name)));function F(){r.value&&(t.addTagFilter(r.value),r.value="")}z(()=>{console.log("HomeView wurde gemountet, rufe fetchRecipes auf..."),t.fetchRecipes()});async function y(d){await t.toggleFavoriteAction(d)}return(d,o)=>{const v=V("router-link");return s(),a("div",null,[n("h2",null,"Willkommen "+l(i(k).userId)+"!",1),n("div",M,[o[3]||(o[3]=n("h3",null,"Deine Rezepte",-1)),g(v,{to:{name:"create-recipe"},class:"btn-new-recipe"},{default:_(()=>[...o[2]||(o[2]=[f(" + Neues Rezept ",-1)])]),_:1})]),n("div",$,[p.value.length>0?A((s(),a("select",{key:0,"onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e),onChange:F,class:"filter-select"},[o[4]||(o[4]=n("option",{value:"",disabled:"",selected:""},"Filter hinzufügen... ▼",-1)),(s(!0),a(c,null,u(p.value,e=>(s(),a("option",{key:e.name,value:e.name},l(e.name),9,j))),128))],544)),[[N,r.value]]):m("",!0),n("div",q,[(s(!0),a(c,null,u(i(t).activeTagFilters,e=>(s(),a("span",{key:e,class:h(["tag",[i(H)(e),"interactive"]]),onClick:C=>i(t).removeTagFilter(e),title:"Filter entfernen"},[f(l(e)+" ",1),o[5]||(o[5]=n("span",{class:"remove-tag"},"×",-1))],10,E))),128))]),i(t).activeTagFilters.length>0?(s(),a("button",{key:1,onClick:o[1]||(o[1]=e=>i(t).clearTagFilters()),class:"filter-clear-btn"}," Alle zurücksetzen ")):m("",!0)]),n("div",K,[i(t).isLoading?(s(),a("p",U,"Lade Rezepte...")):i(t).error?(s(),a("p",W,"Fehler: "+l(i(t).error),1)):i(t).filteredRecipes.length>0?(s(),a("div",G,[(s(!0),a(c,null,u(i(t).filteredRecipes,e=>(s(),S(v,{key:e.id,to:{name:"recipe-detail",params:{id:e.id}},class:"recipe-card-link"},{default:_(()=>[n("div",J,[n("div",O,[n("h4",null,l(e.title),1),n("button",{class:h(["btn-fav",{"is-loading":i(t).togglingFavoriteId===e.id}]),onClick:x(C=>y(e.id),["prevent","stop"]),"aria-pressed":e.isFavorite,title:e.isFavorite?"Favorit entfernen":"Als Favorit markieren"},[i(t).togglingFavoriteId===e.id?(s(),a("span",Q,"…")):(s(),a("span",X,l(e.isFavorite?"★":"☆"),1))],10,P)]),g(L,{tags:e.tags},null,8,["tags"])])]),_:2},1032,["to"]))),128))])):i(t).recipes.length>0&&i(t).filteredRecipes.length===0?(s(),a("p",Y," Keine Rezepte gefunden, die allen Filtern entsprechen. ")):(s(),a("p",Z,"Du hast noch keine Rezepte erstellt."))])])}}}),oe=B(ee,[["__scopeId","data-v-c38636e1"]]);export{oe as default};
