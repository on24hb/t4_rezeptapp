import{d as B,r as o,x as E,c as v,w as F,a as l,b as w,e as c,v as g,F as S,n as V,f as C,t as f,y as D,q,o as p,_ as R}from"./index-CQ66hlSz.js";import{a as U}from"./tags-hyUKznts.js";const M={class:"form-group"},Z=["disabled"],z={class:"form-group"},A=["disabled"],I={class:"form-group"},N=["disabled"],j={class:"form-group"},G={class:"tag-checkbox-group"},H=["id","value","disabled"],J=["for"],K={key:0,class:"error-message"},P=["disabled"],Q=B({__name:"RecipeForm",props:{initialData:{},isLoadingExternally:{type:Boolean},submitButtonText:{}},emits:["submit-recipe"],setup(b,{emit:x}){const i=b,_=x,a=o(""),r=o(""),n=o(""),u=o(!1),d=o(null),m=o([]);function y(t){return t?t.join(`
`):""}function h(t){return t.split(`
`).map(e=>e.trim()).filter(Boolean)}function T(t){t?(a.value=t.title,r.value=y(t.ingredients),n.value=t.instructions,m.value=t.tags?[...t.tags]:[]):(a.value="",r.value="",n.value="",m.value=[]),d.value=null}E(()=>i.initialData,t=>{console.log("RecipeForm: initialData received or changed:",t),T(t)},{immediate:!0});async function L(){u.value=!0,d.value=null;const t=h(r.value);if(!a.value||t.length===0||!n.value){d.value="Bitte fülle alle Felder aus.",u.value=!1;return}const e={title:a.value,ingredients:t,instructions:n.value.trim(),tags:m.value};_("submit-recipe",e),setTimeout(()=>{u.value=!1},1e3)}return(t,e)=>(p(),v("form",{onSubmit:F(L,["prevent"])},[l("div",M,[e[4]||(e[4]=l("label",{for:"title"},"Titel:",-1)),c(l("input",{type:"text",id:"title","onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s),required:"",disabled:i.isLoadingExternally},null,8,Z),[[g,a.value]])]),l("div",z,[e[5]||(e[5]=l("label",{for:"ingredients"},"Zutaten (pro Zeile eine Zutat):",-1)),c(l("textarea",{id:"ingredients","onUpdate:modelValue":e[1]||(e[1]=s=>r.value=s),rows:"5",required:"",disabled:i.isLoadingExternally},null,8,A),[[g,r.value]])]),l("div",I,[e[6]||(e[6]=l("label",{for:"instructions"},"Anleitung:",-1)),c(l("textarea",{id:"instructions","onUpdate:modelValue":e[2]||(e[2]=s=>n.value=s),rows:"8",required:"",disabled:i.isLoadingExternally},null,8,N),[[g,n.value]])]),l("div",j,[e[7]||(e[7]=l("label",null,"Tags auswählen:",-1)),l("div",G,[(p(!0),v(S,null,V(C(U),s=>(p(),v("div",{key:s.name,class:"tag-checkbox-item"},[c(l("input",{type:"checkbox",id:"tag-"+s.name,value:s.name,"onUpdate:modelValue":e[3]||(e[3]=k=>m.value=k),disabled:i.isLoadingExternally||u.value},null,8,H),[[D,m.value]]),l("label",{for:"tag-"+s.name,class:q(["tag-label",s.colorClass])},f(s.name),11,J)]))),128))])]),d.value?(p(),v("p",K,f(d.value),1)):w("",!0),l("button",{type:"submit",disabled:i.isLoadingExternally},f(i.isLoadingExternally||u.value?"Speichern...":i.submitButtonText||"Speichern"),9,P)],32))}}),Y=R(Q,[["__scopeId","data-v-fb99f51d"]]);export{Y as R};
